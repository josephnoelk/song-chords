<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- ðŸ”‘ CRITICAL FOR MOBILE -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>2. Above All Powers | song-chords</title>

<style>
/* Ensure proper mobile width */
html, body {
  width: 100%;
  max-width: 100%;
  margin: 0;
  padding: 0;
}

/* Base layout */
body {
  font-family: monospace;
  font-size: 16px;
  line-height: 1.6;
  padding: 10px;
}

/* Chords */
.chord {
  color: #c00000;
  font-weight: bold;
}

/* Headings */
.song-title {
  font-size: 20px;
  font-weight: bold;
}

.key-line {
  font-size: 14px;
  margin-bottom: 10px;
}

/* Buttons */
button {
  padding: 6px 14px;
  margin-right: 6px;
  font-size: 14px;
  cursor: pointer;
}

/* Song text â€” mobile-safe */
pre {
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-wrap: break-word;
  font-size: 14px;
  margin-top: 10px;
}

/* Footer */
.footer-nav {
  margin-top: 25px;
  text-align: center;
  font-size: 14px;
}

.footer-nav a {
  color: #000;
  text-decoration: underline;
  margin: 0 10px;
}
</style>
</head>

<body>

<div class="song-title">2. Above All Powers</div>

<div class="key-line">
  Original Key: <strong>Bb</strong><br>
  <span id="transposeKey"></span>
</div>

<button onclick="transpose(-1)">â€“</button>
<button onclick="transpose(1)">+</button>

<pre id="song">
[Bb]    [Eb]   [F]    [Bb]
Above all powers,
[Bb]    [Eb]   [F]    [Bb]
above all kings

[Eb]        [F]      [Bb]
Above all nature
[Eb]        [F]      [Bb]
and all created things

[F/A]   [Gm]     [F]     [Eb]
Above all wisdom
[F/A]   [Gm]     [F]     [Eb]
and all the ways of man
[Bb/D]  [Cm]   [Bb]   [F/A] [D]
You were here
[Bb/D]  [Cm]   [Bb]   [F/A] [D]
before the world began

[Bb] [Cm] [F/A] [Bb]
Crucified laid
[Bb] [Cm] [F/A] [Bb]
behind a stone
[Bb]   [Cm]   [F]    [Bb]
You lived to die,
[Bb]   [Cm]   [F]    [Bb]
rejected and alone

[F/A] [Gm]   [Gm/F]  [Eb]
Like a rose
[F/A] [Gm]   [Gm/F]  [Eb]
trampled on the ground
[Bb/D] [Cm] [Bb/D] [Eb] [F] [Bb]
You took the fall
[Bb/D] [Cm] [Bb/D] [Eb] [F] [Bb]
and thought of meâ€¦ Above all

[Bb]    [Eb]   [F]    [Bb]
Above all kingdoms,
[Bb]    [Eb]   [F]    [Bb]
above all thrones

[Eb]        [F]      [Bb]
Above all wonders
[Eb]        [F]      [Bb]
the world had ever known

[F/A]   [Gm]     [F]     [Eb]
Above all wealth
[F/A]   [Gm]     [F]     [Eb]
and treasures of the earth
[Bb/D]  [Cm]   [Bb]   [F/A] [D]
Thereâ€™s no way
[Bb/D]  [Cm]   [Bb]   [F/A] [D]
to measure what youâ€™re worth

[Bb] [Cm] [F/A] [Bb]
Crucified laid
[Bb] [Cm] [F/A] [Bb]
behind a stone
[Bb]   [Cm]   [F]    [Bb]
You lived to die,
[Bb]   [Cm]   [F]    [Bb]
rejected and alone

[F/A] [Gm]   [Gm/F]  [Eb]
Like a rose
[F/A] [Gm]   [Gm/F]  [Eb]
trampled on the ground
[Bb/D] [Cm] [Bb/D] [Eb] [F] [Bb]
You took the fall
[Bb/D] [Cm] [Bb/D] [Eb] [F] [Bb]
and thought of meâ€¦ Above all

</pre>

<div class="footer-nav">
  <a href="https://sites.google.com/view/song-chords/choruses">Back to Choruses</a> |
  <a href="https://sites.google.com/view/song-chords">Home</a>
</div>

<script>
/* Flat-friendly chromatic scale */
const NOTES = ["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];

/* Original key */
const ORIGINAL_KEY = "Bb";
const originalIndex = NOTES.indexOf(ORIGINAL_KEY);

/* Preserve original song */
const originalSong = document.getElementById("song").innerText;

/* Transpose offset */
let transposeSteps = 0;

/* Colorize chords */
function colorize(text) {
  return text.replace(/\[([^\]]+)\]/g, '<span class="chord">[$1]</span>');
}

/* Render */
function render(songText) {
  document.getElementById("song").innerHTML = colorize(songText);
}

/* Initial render */
render(originalSong);

/* Transpose a chord correctly */
function transposeChord(chord, steps) {
  let parts = chord.split("/");
  let root = parts[0];
  let bass = parts[1] || null;

  let match = root.match(/^([A-G])(b|#)?(.*)$/);
  if (!match) return chord;

  let note = match[1] + (match[2] || "");
  let suffix = match[3] || "";

  let index = NOTES.indexOf(note);
  if (index === -1) return chord;

  let newNote = NOTES[(index + steps + 12) % 12];
  let newChord = newNote + suffix;

  if (bass) {
    let bassIndex = NOTES.indexOf(bass);
    if (bassIndex !== -1) {
      let newBass = NOTES[(bassIndex + steps + 12) % 12];
      newChord += "/" + newBass;
    }
  }

  return newChord;
}

/* Main transpose */
function transpose(step) {
  transposeSteps += step;

  let song = originalSong.replace(/\[([^\]]+)\]/g, (m, chord) => {
    return "[" + transposeChord(chord, transposeSteps) + "]";
  });

  let currentIndex = (originalIndex + transposeSteps + 12) % 12;
  let currentKey = NOTES[currentIndex];

  document.getElementById("transposeKey").innerText =
    transposeSteps === 0 ? "" : "    Transpose Key: " + currentKey;

  render(song);
}
</script>

</body>
</html>
